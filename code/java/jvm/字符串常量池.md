---
dg-publish: true
title: 字符串常量池
createTime: 2023-07-26 00:39  
---

## 设计思想

1. 字符串的分配，和其他的对象分配一样，耗费高昂的时间与空间代价，作为最基础的数据类型，大量频繁的创建字符串，极大程度地影响程序的性能。
2. JVM为了提高性能和减少内存开销，在实例化字符串常量的时候进行了一些优化。
	1. 为字符串开辟一个字符串常量池，类似于缓存区 
	2. 创建字符串常量时，首先坚持字符串常量池是否存在该字符串。
	3. 存在该字符串，返回引用实例，不存在，实例化该字符串并放入池中。

## 存放地址

**字符串常量池则存在于方法区**

## 字符串对象的创建步骤
> String str4 = new String(“abc”) 创建多少个对象？

1. 在常量池中查找是否有“abc”对象。
2. 有则返回对应的引用实例；
3. 没有则创建对应的实例对象。
4. 在堆中 new 一个 String("abc") 对象。
5. 将对象地址赋值给str4，创建一个引用。

所以，常量池中没有“abc”字面量则创建两个对象，否则创建一个对象，以及创建一个引用。


