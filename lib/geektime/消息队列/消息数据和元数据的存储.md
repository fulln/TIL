---
dg-publish: true
title: 消息数据和元数据的存储
createTime: 2023-07-27 23:37  
---

## 存储模块的功能设计和实现。

消息队列中的数据一般分为元数据和消息数据。元数据是指 Topic、Group、User、ACL、Config 等集群维度的资源数据信息，消息数据指客户端写入的用户的业务数据。下面我们先来看元数据信息的存储。

### 元数据信息的存储
不会经常读写，但是需要保证数据的强一致和高可靠，不允许出现数据的丢失

元数据信息一般需要通知到所有的 Broker 节点，Broker 会根据元数据信息执行具体的逻辑。比如创建 Topic 并生成元数据后，就需要通知对应的 Broker 执行创建分区、创建目录等操作。

#### 基于第三方组件来实现元数据的存储是目前业界的主流选择

最大的优点是集成方便，开发成本低，能满足消息队列功能层面的基本要求，因为我们可以直接复用第三方组件已经实现的一致性存储、高性能的读写和存储、Hook 机制等能力，而且在后续集群构建中也可以复用这个组件，能极大降低开发难度和工作成本

引入第三方组件会增加系统部署和运维的复杂度，而且第三方组件自身的稳定性问题会增加系统风险，第三方组件和多台 Broker 之间可能会出现数据信息不一致的情况，导致读写异常。



# 地址 

此文章为7月day27 学习笔记，内容来源于极客时间《https://time.geekbang.org/column/article/671725》