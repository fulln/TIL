#DDD #极客时间 

## 课程内容

实体是一个“东西”，而值对象是一个“值”，往往用来描述一个实体的属性。

### 值对象的好处

不论在内存还是数据库里，都可以选择共享和不共享的方式。这种灵活性，可以使我们在实现的时候，基于性能等原因进行优化。

#### 实体内存布局

在同一个线程里，一个实体对象在内存空间里只能出现一次

#### 值对象的内存布局

值对象是不可修改的。所以，即使在内存里重复出现了，也不会像实体那样，由于修改而导致错误。

值对象在内存里多数是不共享的。比如 Java 语言里，默认情况下，字符串（String）、整数（Integer）等等都是不共享的。但有时候，JVM 会“偷偷地”把相同的字符串共享，以便节省内存空间。不过，这对程序员是不可见的，我们总是应该假定字符串没有共享

**不论共享还是不共享，都只是一种实现上的选择，在概念层面，一个值对象总是唯一的。**

#### 实体的数据库布局
在数据库表里，一个实体也只能有一条记录，不应该重复。

#### 值对象的数据库布局

在数据库里是同一个表，在内存里却是不同的对象，这种数据库和内存的差异，称为阻抗不匹配
和内存布局类似，值对象在数据库里也是既可以共享，也可以不共享，比实体更灵活。


#### 值对象的其他优点

1. 采用值对象就可以减少出错的几率。
2. 减少并发错误。
3. 使用值对象也更容易进行函数式编程。


## 课程地址

[《手把手教你落地 DDD》学习笔记Day7](https://time.geekbang.org/column/article/623512)