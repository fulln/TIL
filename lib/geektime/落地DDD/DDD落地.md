#设计思想 #DDD #极客时间 

## 34｜落地经验：怎样在实际项目中推广DDD？

### DDD 的切入场景

- 第一种是新建系统。也就是说现在刚好有一个新项目，可能是要开发一个全新的系统，也可能是为现有系统新增或重写一个比较大的模块。这时候，领导希望保证质量，降低风险，觉得需要方法学的支持，因此要引入 DDD。
- 第二种是改造现有系统。常见的情况是，某个对公司很有价值的系统，已经维护了很多年，系统架构和质量日益腐化，很难维护，不能满足快速变化的业务需求。这时候希望引入 DDD 对系统进行比较大的重构，使系统重新“焕发青春”。另一种情况是企业要进行服务化改造，把一些现有的单体应用拆分成微服务。
- 第三种是改进现有研发流程。公司未必想专门花一大笔预算新建或者改造系统，但领导已经意识到目前的研发流程有种种不足，如果再“野蛮生长”下去，会有很大的隐患。因此希望通过引入 DDD 等方法，提高研发水平和效能。

### 试点项目和团队的选择

所谓有价值，是指站在企业的角度，这个系统对达成企业的战略目标有较大的意义

所谓有痛点，指的是公司管理层或者开发团队确实遇到了难以解决的困难，需求寻求方法学的帮助

所谓有意愿，指的是开发团队确实愿意学习新技能

有时间也很重要。引入任何新技术，总会有些成本。包括学习成本、试错成本等等。关键是看产出是否大于成本

### 新建系统要注意什么

1. 在开发过程中一定要避免“瀑布型思维”。这种思维假设在项目的前期，就可以把需求理解得很透彻，模型建立得很合理，然后在中后期，把模型交给开发人员编码就万事大吉了。
2. 前期的总体规划和设计还是必要的。但要意识到，这时候产生的模型还是方向性的、粗粒度的，之后开发过程中要随着对问题理解的深入，不断演进。

### 改造现有系统要注意什么

#### 1. 反推领域模型

从系统现状中“反推”出当前的领域模型，目的是客观地反映出系统当前的领域知识和逻辑

从数据库、用户界面、代码等方面入手。一般是先看数据库，因为数据库里常常已经凝聚了 80% 的业务知识。如果数据库看不明白，再看界面，如果还不明白，就只能翻代码了。

#### 2. 建立目标领域模型

就可以建立目标领域模型，作为改进的方向。建立目标领域模型，一定要有明确的“时间点”。也就是说，这个目标是 1 年的、3 个月的、还是 2 周的。脱离时间谈目标是没有意义的。越远的目标应该越宏观，越粗粒度；越近的目标应该越具体，越细致

#### 3. 设计演进路线。
有了当前模型和目标模型，就可以分析两者之间的差距。跨越这个差距的过程就是改进的过程。设计演进路线最大的问题就是怎么保证可行性。一般要把改进过程化整为零，迭代实施

#### 4. 迭代实施
基于敏捷软件开发方法，小步快跑地实施。在这个过程中，必然会对之前建立的目标领域模型进行反馈，不断改进

#### 5. 选择精益切片 
选择系统中一个相对独立的小模块，然后按照前面的 4 步，尽快落地到代码并上线，建立最小闭环。

### 合理的资源和时间安排
运用演进式架构、重构等技巧，可以把原来看起来不能拆分的系统改造工作，拆成一个个相对独立的小任务。每个任务大概几天就可以完成，并且可以在不影响系统功能的前提下上线。上线后，尽管还不能达到总体的改进目标，但已经向目标迈进了一小步。

每个迭代争取 30% 的时间改造系统。然后，把拆分出的小任务分散在各个迭代中，就可以和业务需求并行处理了。


### 低配版DDD
![[Pasted image 20230302225117.png]]



## 地址

此文章为3月day2 学习笔记，内容来源于极客时间《[34｜落地经验：怎样在实际项目中推广DDD？ (geekbang.org)](https://time.geekbang.org/column/article/635740)》
