#java #tcp #极客时间 

## 07 | What? 还有本地套接字？

本地套接字是 IPC，也就是本地进程间通信的一种实现方式。除了本地套接字以外，其它技术，诸如管道、共享消息队列等也是进程间通信的常用方法，但因为本地套接字开发便捷，接受度高，所以普遍适用于在同一台主机上进程间通信的各种场景

### 本地套接字 IPC

kubelet 是 Kubernetes 的一个组件，这个组件负责将控制器和调度器的命令转化为单机上的容器实例

kubelet 设计了基于本地套接字的客户端 - 服务器 GRPC 调用。

#### 概述

本地套接字一般也叫做 UNIX 域套接字，最新的规范已经改叫本地套接字

本地套接字是一种特殊类型的套接字，和 TCP/UDP 套接字不同。TCP/UDP 即使在本地地址通信，也要走系统网络协议栈，而本地套接字，严格意义上说**提供了一种单主机跨进程间调用的手段，减少了协议栈实现的复杂度，效率比 TCP/UDP 套接字都要高许多**。类似的 IPC 机制还有 UNIX 管道、共享内存和 RPC 调用等。


#### 本地字节流套接字

` listenfd = socket(AF_LOCAL, SOCK_STREAM, 0);`

创建的套接字类型，注意是 AF_LOCAL，并且使用字节流格式

读取本地文件，本地文件，必须是一个“文件”，不能是一个“目录”。如果文件不存在，后面 bind 操作时会自动创建这个文件。

#### 服务器端监听在无权限的文件路径上

 提示没有权限

#### 本地数据报套接字

需要指定一个本地路径，以便在服务器端回包时，可以正确地找到地址


#### 特点

1. 本地套接字的编程接口和 IPv4、IPv6 套接字编程接口是一致的，可以支持字节流和数据报两种协议。
2. 本地套接字的实现效率大大高于 IPv4 和 IPv6 的字节流、数据报套接字实现。

## 地址

此文章为3月day9 学习笔记，内容来源于极客时间《[07 | What? 还有本地套接字？ (geekbang.org)](https://time.geekbang.org/column/article/118721)》，推荐该课程
