---
dg-publish: true
title: 单字符串多字段查询
createTime: 2023-05-28 21:33  
---

### 算分过程

-  should 查询
- 相加

### Disjunction Max Query

- 不应该将分数简单叠加，而是找到单个最佳匹配的字段评分
- 将任意查询匹配的文档作为结果返回，采用字段上最匹配的评分返回

```
POST blogs/_search
{
    "query": {
        "dis_max": {
            "queries": [
                { "match": { "title": "Quick fox" }},
                { "match": { "body":  "Quick fox" }}
            ]
        }
    }
}

```

### 通过Tie Breaker 参数调整

1. 获取最佳匹配语句的评分 _ SCORE
2. 将其他匹配语句的评分与tie breaker 相乘
3. 对以上评分求和并规范化


```
POST blogs/_search
{
    "query": {
        "dis_max": {
            "queries": [
                { "match": { "title": "Quick pets" }},
                { "match": { "body":  "Quick pets" }}
            ],
            "tie_breaker": 0.2
        }
    }
}

```


# 地址

此文章为5月day28 学习笔记，内容来源于极客时间《https://time.geekbang.org/course/detail/100030501-108850》
