---
dg-publish: true
title: 多语言及中文分词检索
createTime: 2023-05-30 23:40  
---

### 自然语言与查询recall

有时候,尽管搜索和原文不完全匹配，但是希望搜到一些内容。
1. 优化点
	1. 归一化词元: 清除变音符号
	2. 抽取词根: 清除单复数和时态的差异
	3. 包含同义词
	4. 拼写错误: 拼写错误，或者同音异形词

有些会出现不同索引使用不同的语言，这个时候希望
	1. 词干提取
	2. 不正确的文档频率，英文为主的文章中，德文算分高
	3. 需要判断用户搜索的语言
		1. 根据语言，查询不同的索引

 分词挑战
	 1. 英文分词
	 2. 中文分词
		 1. 分词标准不同
		 2. 歧义的挑战
		 3. 分词演变
			 1. 字典法
				 1. 从左到右扫描一遍，有的词就标注，复合词就找最长的
				 2. 不认识的字串就分割成单自此
			 2. 最小词数的分词
				 1. 一句话应该分成数量最少的词串
				 2. 二义分割，无能为力
			 3. 基于统计法的机器学习算法
				 1. 解决了二以的问题
				 2. hanlp分词工具
			 4. 中文分词以统计语言模型为基础
				 1. 使用机器学习算法和词典结合
				 2. 提高分词准确率，改善领域适应性
		
常见分词器：

- hanlp
- ik
- icu
- pinyin

```
安装插件
./elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.1.0/elasticsearch-analysis-ik-7.1.0.zip
#安装插件
bin/elasticsearch install https://github.com/KennFalcon/elasticsearch-analysis-hanlp/releases/download/v7.1.0/elasticsearch-analysis-hanlp-7.1.0.zip



POST _analyze
{
  "analyzer": "hanlp_standard",
  "text": ["剑桥分析公司多位高管对卧底记者说，他们确保了唐纳德·特朗普在总统大选中获胜"]

}     

#Pinyin
PUT /artists/
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "user_name_analyzer" : {
                    "tokenizer" : "whitespace",
                    "filter" : "pinyin_first_letter_and_full_pinyin_filter"
                }
            },
            "filter" : {
                "pinyin_first_letter_and_full_pinyin_filter" : {
                    "type" : "pinyin",
                    "keep_first_letter" : true,
                    "keep_full_pinyin" : false,
                    "keep_none_chinese" : true,
                    "keep_original" : false,
                    "limit_first_letter_length" : 16,
                    "lowercase" : true,
                    "trim_whitespace" : true,
                    "keep_none_chinese_in_first_letter" : true
                }
            }
        }
    }
}


GET /artists/_analyze
{
  "text": ["刘德华 张学友 郭富城 黎明 四大天王"],
  "analyzer": "user_name_analyzer"
}

```


# 地址

此文章为5月day30 学习笔记，内容来源于极客时间《https://time.geekbang.org/course/detail/100030501-109501》
