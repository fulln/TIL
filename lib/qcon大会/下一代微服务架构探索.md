---
dg-publish:  true
title: 下一代微服务架构探索
createTime: 2023-05-27 09:20  
---

> PDF:  [[01.下一代微服务架构的实践与探索-季敏（清铭）.pdf]]

### 电商上的实践

#### 生态架构体系

- 中间价技术架构演进
[[图例]]
- 从单体到分布式高可用
	- 1w实力规模
	- 99.9
	- 超10个人协调
	- 10w实例规模
	- 中台服务
	- 100+人协同
#### 4.0 体系的突破
- 容器调度
	- 自动化运维
- 流量控制
	- 微服务
	- 动态路由
	- 配置管理
- runfast
	- 声明式API
挑战:
 百万实例 -> 千万实例
	 - 异地多活
容灾:
同城 -> 异地
	- 流量切换
	- 数据不丢
	- 数据一直
- 机房选址
单元化:
 - 流量增长带来的业务水平容量问题
 - 停电下,服务可用
异地冷备:
	- 流量未验证
	- 成本高
 争先冗宅:
 - 强中心的服务,跨单元调用
 - 交易运行时:
	 - 中心75%
	 - 容灾机房 1%
- 容灾态:
	- 容灾机房:100 %

内核稳定性问题:
1. 最小内核:
		rpc+注册中心
1. 注册中心地址 千万+
	1. 推送效率低
	2. 业务端内存占比高
	3. 地址信息大
	4. 减少rpc的地址信息
		1. 只保留地址信息
		2. 其他元数据在provider
			1. consumer 感应md5,直接从producer直接去拉去配置
	5. 新老业务兼容
		1. 双注册模式
			1. 接口+ 应用
2. 注册中心:
	1. session/data 分离
	2. 流量过载保护
	3. 数据压缩
3. 数据一致性问题
	1. 分布式事务
	2. select from update
	3. commit on success ,自动将事务提交
		1. seata 依赖jdbc commit 
			1. 无锁话
			2. hint
#### 三位一体架构模式

[[图例]]

演进的思考:
1. 稳定性
	1. 
2. 性能
	1. 通过中间价演进,降低消耗
	2. 一致性和性能权衡
3. 安全
	1. 爆炸半径
4. 成本效率

### 微服务架构的开源

[[图例]]

微服务互联互通:

1. 南北流量
	1. http协议
	2. 网关转换
		1. 性能低
		2. 转换有损,丢标
	3. 性能/扩展性
2. dubbo 暴露多协议
	1. 优化:
		1. 与springCloud 打通
微服务治理: OpenSergo
1. 激增流量
2. 不稳定服务依赖

规划:
	[[图例]]
### 微服务探索

统一控制面,

云原生网关:
1. 多次转换
2. rpc互访
3. Envoy

[[图例]]

智能化:

